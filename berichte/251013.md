Name: Lisa Hintermaier   
Klasse: 4AHITS
Fach: ITSE4 - Übungen   
Datum: 13.10.2025  

# Übung Host discovery    

## Übung(ping)       
### Als host discovery (host scanning) versteht man den Vorgang um unbekannte Geräte in einem Netzwerk zu finden, bzw. festzustellen ob bekannte Geräte im Netzwerk erreichbar sind.  

### Aufgabenstellung: Verwende Kali und Metasploitable im Bridged Mode (Bridge ins Labor-Netzwerk)      
-> Beide VM's waren bereits von vorheriger Übung im Bridget Modus und im Labor Netz.       

### Aufgabenstellung: Experimentiere mit ping im Labor-Netzwerk (Metasploitable, Default Gateway, …)   
-> Von Metasploitable auf Kali Vm Pingen 
Ip Kali: 192.168.18.51   
![](https://github.com/user-attachments/assets/2081e739-7931-4043-92d6-373e1e35429d)

-> Von Kali Vm auf Metasploitable VM 
Ip Metasploitable: 192.168.18.52   
![](https://github.com/user-attachments/assets/379299e1-ba42-4b64-a52f-5463770efebb)

-> Von Kali Vm auf Default-Gateway
Ip Default-Gateway: 192.168.18.254
![](https://github.com/user-attachments/assets/209ff128-eee4-490b-b1fe-7e2933aeb769)

-> Von Metasploitable Vm auf Default-Gateway
Ip Default-Gateway: 192.168.18.254
![](https://github.com/user-attachments/assets/9343c3ea-d410-4992-8b28-75a22e46d95e)

### Aufgabenstellung: Recherchiere zu den Optionen von ping, erstelle ein kleines Cheat Sheet
## Zuhasue auf html machen
| Option          |                                             Bedeutung 
| --------------- | ----------------------------------------------------:
| `-c <count>`    |                           Anzahl ICMP‑Requests senden 
| `-i <interval>` |                 Intervall (Sekunden) zwischen Paketen 
| `-t <ttl>`      |                                   Time To Live setzen 
| `-W <timeout>`  |                Wartezeit (Sek.) pro Paket auf Antwort 
| `-w <deadline>` |               Gesamtablaufzeit (Sek.) bis ping stoppt 
| `-4 / -6`       |                               Erzwinge IPv4 bzw. IPv6 
| `-l <preload>`  |              Anzahl vorab gesendeter Pakete (Preload) 

### Aufgabenstellung: Welchen Netzwerkdienst verwendet der ping Dienst? Recherchiere wie Firewalls häufig mit ping umgehen.
1. Welches Protokoll nutzt ping?
    1. Ping verwendet das ICMP-Protokoll (Internet Control Message Protocol).
    2. Es sendet Echo Request-Pakete und erwartet Echo Reply-Pakete zurück.
    3. ICMP ist kein TCP oder UDP, sondern ein eigenständiges Diagnoseprotokoll.
  
2. Wie gehen die Firewalls mit ping um?
   1. Viele Firewalls blockieren standardmäßig ICMP Echo Requests.
   2. Andere erlauben ICMP nur für eingehende Antworten, wenn selbst Anfragen gestellt wurden.
   3. Manche Firewalls filtern oder erlauben nur bestimmte ICMP-Typen.
  
# Übung (ping script)
### Aufgabenstellung: Schreibe ein shell Skript das automatisiert (Schleife) alle Hosts im subnet anpingt. Die Ausgabe soll so sein, dass man daraus die aktiven Hosts erkennen kann (für nicht aktive Hosts soll keine Ausgabe sein).
### Lösung Skript: 
```shell
#!/bin/bash
TIMEOUT=1
PARALLEL=50
IP=$(ip -4 addr show scope global | grep inet | awk '{print $2}' | cut -d/ -f1 | head -n1)
 
if [[ -z "$IP" ]]; then
  echo "Keine lokale IPv4-Adresse gefunden! Bitte Subnetz als Parameter angeben."
  exit 1
fi
 
IFS='.' read -r o1 o2 o3 o4 <<< "$IP"
BASE="$o1.$o2.$o3"
 
echo "Scanne Subnetz: $BASE.0/24"
 
ping_host() {
  IP="$1"
  if ping -c1 -W $TIMEOUT -n "$IP" &>/dev/null; then
    LATENCY=$(ping -c1 -W $TIMEOUT -n "$IP" | grep 'time=' | awk -F'time=' '{print $2}' | awk '{print $1}')
    echo "$IP ist aktiv (Latenz: $LATENCY)"
  fi
}
 
export -f ping_host
export TIMEOUT
 
# Hosts von .1 bis .254 anpingen parallelisiert
seq 1 254 | xargs -P $PARALLEL -n1 -I{} bash -c 'ping_host '"$BASE".{}''
```
### Ausgabe: 
![](https://github.com/user-attachments/assets/92967aa9-edca-4c7c-ac52-597ea0d99f34)

## Übung (host discovery)   

### Aufgabenstellung: Recherchiere zur grundlegenden Anwendung von nmap für einen sogenannten ping scan (host discovery).
Zweck: herausfinden, welche Hosts in einem Netz up sind, ohne Ports komplett zu scannen.
Kernkommando: ´nmap -sn <netz>´ z.B. nmap -sn 192.168.18.51/24.
Methoden: -PR (ARP, sehr zuverlässig im LAN, -PE (ICMP Echo), -PS<ports> (TCP SYN probes), -PU<ports> (UDP probes).
Wenn Discovery fehlschlägt: -Pn (behandle Hosts als up — überspringt Discovery).
Performance: -T3..-T4, --min-rate/--max-rate, --host-timeout steuern Tempo; ARP ist am schnellsten im LAN.
Ausgabe/Parsing: -oG - | awk '/Up$/{print $2}' für reine IP‑Liste, oder -oX für XML.
Wichtige Hinweise: Root nötig für manche Probes; ARP nur im lokalen Layer‑2; Firewalls/ICMP‑Filter können zu False‑Negatives führen.

### Aufgabenstellung: Ermittle alle aktiven Hosts im Subnetz des Labor-Netzwerks mit nmap.
### Lösung Befehl: nmap -sn 192.168.18.51
### Ausgabe:
![](https://github.com/user-attachments/assets/85756dae-affa-41d2-9244-d0dd0ea4d00f)
Zusatz Info: man kann natürlich auch die Ip-adresse eines anderen Labornetzes nehmen, jedoch sieht man  dann weniger Infos, weil die Anfrage über den Router geht und da Layer3 ist. Man sieht also keine Mac-Adressen mehr weil die Mac-Adressen auf Layer2 arbeiten. 
