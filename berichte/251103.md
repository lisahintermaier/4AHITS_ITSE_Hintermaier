Name: Lisa Hintermaier        
Klasse: 4AHITS    
Fach: ITSE-Übungen    
Datum: 03.11.2025     

# Port probing und scanning

## Übung (port probing)
### Angabe: Beim port probing möchte man herausfinden ob auf einem gewissen port ein Dienst läuft, welcher Dienst dies ist und (wenn möglich) mehr Details wie z.B. Versionsnummern.    
Diese Information dient als Basis für weitere Angriffe.   
telnet, nc (netcat) und curl sind einfache Tools die zum port probing verwendet werden können. 
Teilweise ist es auch möglich die kontaktierten Dienste dazu zu veranlassen mehr Informationen über sich preiszugeben (banner grabbing).

- Verwende telnet um festzustellen ob ein ssh Server auf Metasploitable läuft   
- Finde Bezeichnung und die Versionsnummer des Web Servers auf Metasploitable heraus. Auf 3 Arten:   
  - Verwende telnet   
  - Verwende nc (netcat)   
      - Hinweis: der notwendige http request header kann am besten mit Hilfe eines Shell here-documents beschrieben werden.  
  - Verwende curl   
-Erstelle ein port probing cheat sheet für alle 3 Tools

### Lösungen der einzelnen Unteraufgaben:    

### 1. Unteraufgabe: Verwende telnet um festzustellen ob ein ssh Server auf Metasploitable läuft   
### Lösung: 
Befehl: `telnet 192.168.18.51 22`   
Die IP von Metasploitable.     
Port 22 ist hierbei die Port Nummer von SSH.   
![](https://github.com/user-attachments/assets/8161699c-de11-4397-8d22-84632744639c)        

### 2.1 Unteraufgabe: Finde Bezeichnung und die Versionsnummer des Web Servers auf Metasploitable heraus. Auf 3 Arten:   
  - Verwende telnet    
### Lösung:    
Webserver Port = 80   
Mann muss als erstes die telnet Verbindung mit dem Befehl: `telnet 192.168.18.51` zur IP herstellen, dannach kann man eine HTTP - Anfrage erstellen.   
Mit 2 Leerzeilen die Anfrage wieder beenden.   
Man bekommt den HTTP Header zurück:   
![](https://github.com/user-attachments/assets/9f89b92a-bdea-4f02-bd08-2c2cd398c173)

### 2.2 Unteraufgabe: Finde Bezeichnung und die Versionsnummer des Web Servers auf Metasploitable heraus. Auf 3 Arten:   
  - Verwende nc (netcat)      
### Lösung:    
Webserver Port = 80        
#### Variante ohne Shell here-documents:   
Mann muss als erstes die netcat-Verbindung aufbauen: `nc 192.168.18.51`    
Dannach kann man diese Zeilen manuell eingeben:     
```
HEAD / HTTP/1.0    
Host: 192.168.18.51
```    
Wieder mit 2 Leerzeilen beenden.    
![](https://github.com/user-attachments/assets/0cfeab39-f1e2-416a-8a2b-24e52ec8802a)   

#### Variante mit Shell here-documents    
Skript:    
```
$ nc 192.168.18.51 80 << EOF 
HEAD / HTTP/1.0
Host: 192.168.18.51
Connection: close


EOF
```   
Hinweis: Die Leerzeilen braucht man, damit er weiß, dass er es aussführen muss.    
![](https://github.com/user-attachments/assets/7dca2e14-e12e-4227-902e-cfb4d5575c67)   

### 2.3 Unteraufgabe: Finde Bezeichnung und die Versionsnummer des Web Servers auf Metasploitable heraus. Auf 3 Arten:   
  - Verwende curl
### Lösung:   
Webserver Port = 80       
Befehl: `curl -I http://192.168.18.51/`    
![](https://github.com/user-attachments/assets/2f5e646b-1a21-4ae7-9707-900be16137cd)       

### 3. Unteraufgabe: Erstelle ein port probing cheat sheet für alle 3 Tools
<table border="1" cellpadding="8" cellspacing="0">
  <thead>
    <tr>
      <th>Tool</th>
      <th>Zweck</th>
      <th>Schnellbefehle (Beispiel IP <code>192.168.17.51</code>)</th>
      <th>Wichtiges / Tipp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>telnet</code></td>
      <td>Interaktive Schnellprüfung von TCP-Ports</td>
      <td>
        SSH: <code>telnet 192.168.17.51 22</code><br>
        HTTP: <code>telnet 192.168.17.51 80</code> → dann <code>HEAD / HTTP/1.0</code> + <code>Host: 192.168.17.51</code> + leere Zeile
      </td>
      <td>Einfach & interaktiv; manuelles Senden von Text nötig. Verbindung beenden mit <code>Ctrl+]</code> → <code>quit</code>. Nicht verschlüsselt (Telnet selber).</td>
    </tr>

    <tr>
      <td><code>nc</code> (netcat)</td>
      <td>Roh-TCP, Scripting, Banner-Grabbing</td>
      <td>
        Port-Check (verbindungsprobe): <code>nc -vz 192.168.17.51 22</code><br>
        Timeout setzen: <code>nc -vz -w 3 192.168.17.51 22</code><br>
        HTTP Header (sauber mit CRLF):<br>
        <code>printf 'HEAD / HTTP/1.0\r\nHost: 192.168.17.51\r\nConnection: close\r\n\r\n' | nc 192.168.17.51 80</code>
      </td>
      <td>Sehr flexibel — gut für Skripte. Achte auf Netcat-Variante (GNU vs OpenBSD): <code>-N</code> schließt Verbindung bei OpenBSD-nc. <code>-w</code> für Timeout; <code>-z</code> nur „scan“ (no I/O).</td>
    </tr>

    <tr>
      <td><code>curl</code></td>
      <td>HTTP(S) Header & Fingerprinting, Web-Service Tests</td>
      <td>
        Kurz Header: <code>curl -sI http://192.168.17.51/</code><br>
        Verbose / Debug: <code>curl -v http://192.168.17.51/</code><br>
        Ganze Antwort sichtbar & Follow Redirects: <code>curl -vL http://192.168.17.51/</code>
      </td>
      <td>Ideal für Webserver: zeigt <code>Server:</code>-Header und TLS-Infos. Nutze <code>-s</code> zum Unterdrücken von Fortschritt, <code>-I</code> nur Header, <code>--max-time</code> für Timeout.</td>
    </tr>
  </tbody>
</table>


## Übung (netcat port scan)
Ermittle mit Hilfe von netcat welche Ports zwischen 1 und 30 in der Metasploitable VM geöffnet sind – Hinweis: dies geht in einer einzigen Kommandozeile. Recherchiere welche Dienste sich dort befinden.   
Randnotitz: netcat wird auch gerne als das swiss army knife of network tools bezeichnet.   
### Herausfinden welche Ports offen sind: 
Befehl: `nc -zv -w1 192.168.18.51 1-30`   
![](https://github.com/user-attachments/assets/290409dd-7356-426b-8fe9-d3e8d3271a07)   
Herausfinden, welche Dienste sich dort befinden: 
<table>
  <thead>
    <tr>
      <th>Port</th>
      <th>Protokoll</th>
      <th>Dienst / Anwendung</th>
      <th>Beschreibung</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>21</td>
      <td>FTP (File Transfer Protocol)</td>
      <td>Dateiübertragung (Kontrollverbindung)</td>
      <td>Wird für die Steuerung von FTP-Verbindungen genutzt - dient dem Austausch von Dateien zwischen Client und Server.</td>
    </tr>
    <tr>
      <td>22</td>
      <td>SSH (Secure Shell)</td>
      <td>Sichere Remote-Verbindung</td>
      <td>Dient für verschlüsselte Verbindungen zu entfernten Systemen.</td>
    </tr>
    <tr>
      <td>23</td>
      <td>Telnet</td>
      <td>Unverschlüsselte Remote-Verbindung</td>
      <td>Wird für entfernte Terminalsitzungen verwendet, jedoch unsicher, da Daten im Klartext übertragen werden.</td>
    </tr>
    <tr>
      <td>25</td>
      <td>SMTP (Simple Mail Transfer Protocol)</td>
      <td>E-Mail-Versand</td>
      <td>Wird für das Senden von E-Mails zwischen Mailservern oder vom Mail-Client zum Server verwendet.</td>
    </tr>
  </tbody>
</table>
 
## Übung (nmap port scan)
Nach dem ping scan (und wenn nicht die Option -sn angegeben ist) führt nmap automatisch einen port scan auf allen gefundenen hosts aus. Dabei wird versucht alle offenen Ports eines Hosts zu finden. Das Ziel ist eine Liste der am Host laufenden Dienste zu erhalten.

Hinweise: Man kann eine einzelne IP Adresse angeben, dann wird nur diese gescannt, z.B.: nmap 192.168.178.42

Siehe List of TCP and UDP port numbers

### Aufgaben:   
### Führe einen port scan auf die Metasploitable VM durch. Analysiere das Ergebnis.   
### Lösung:   
![](https://github.com/user-attachments/assets/cd972631-917d-432e-8a45-686bae7c5072)   
- Analyse: Der Befehl führt host-discovery durch um zu prüfen ob der Host up oder down ist. Gibt eine Zusammenfassung der gefundnen offenen Ports und die vermutete Dienstbezeichnung wenn der Port offen ist. Macht einen  port-Scan der Top-1000 TCP-Ports. 

### Experimentiere mit den Optionen für (Victim ist Metasploitable VM):
Scannen aller möglichen Ports. Macht das bei Metasploitable, verglichen zum Default Verhalten, einen Unterschied?
### Lösung:   
![](https://github.com/user-attachments/assets/b550c14c-cf59-4a07-92e9-cf07f3c3bcca)   
Was ändert das:    
-p- oder -p 1-65535 scannt alle TCP-Ports statt nur Top-1000.
Das erhöht die Laufzeit.
Auf Metasploitable kann das zusätzliche Dienste auf hohen Ports zutage bringen, die der Default-Scan ausgelassen hätte. Metasploitable enthält oft Dienste auf unüblichen Ports. Für vollständige Erfassung ist ein Full-port-scan sinnvoll.

### Überspringen Ping-Scan/Host-Discovery. Warum kann diese Option notwendig sein?
Service/Version Detection
OS Erkennung
Aggressive Scan
Timing/Speed
Ausgabe in Dateien
die Option --reason
nur die N häufigsten Ports scannen (dokumentiere den Geschwindigkeitsgewinn)
Führe weitere port scans durch, auf:
einem Kali Linux auf einem anderen Rechner
einem Windows System
dem Default Gateway im Labor Netz
Was kann alles mit einem port scan herausgefunden werden? Dokumentiere!

